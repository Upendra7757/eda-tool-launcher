{% extends "launcher/base.html" %}
{% block content %}

<div class="max-w-6xl mx-auto">

  <!-- Back -->
  <div class="mb-6">
    <a href="{% url 'logs-home' %}"
       class="text-sm text-blue-400 hover:underline">
      â† Back to Logs
    </a>
  </div>

  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold">Run Details</h1>
    <p class="text-sub mt-1">
      {{ run.tool.name }} Â· {{ run.created_at|date:"M d, Y Â· h:i A" }}
    </p>
  </div>

  <!-- Status -->
  <div class="mb-6 flex items-center gap-4">

    {% if run.status == "success" %}
      <span class="px-4 py-1 rounded-full bg-green-600 text-sm font-medium">
        Success
      </span>
    {% elif run.status == "failed" %}
      <span class="px-4 py-1 rounded-full bg-red-600 text-sm font-medium">
        Failed
      </span>
    {% else %}
      <span class="px-4 py-1 rounded-full bg-yellow-500 text-sm font-medium">
        Running
      </span>
    {% endif %}

    <span class="text-xs text-sub">
      Updated {{ run.completed_at|default:run.created_at|timesince }} ago
    </span>
    
    <a href="{% url 'view-run-logs' run.id %}">
       class="btn-secondary text-sm ml-auto">
      â–¶ View Logs
    </a>


    <a href="{% url 'download-run-logs' run.id %}"
       class="btn-secondary text-sm ml-auto">
      ğŸ“¥ Download Logs
    </a>

  </div>

  <!-- STDOUT -->
  <div class="glass p-6 rounded-xl mb-6">
    <h2 class="text-lg font-semibold mb-3">STDOUT</h2>

    <pre class="text-sm bg-black/80 text-green-400 p-4 rounded-lg overflow-x-auto max-h-[400px]">
{{ run.stdout|default:"(empty)" }}
    </pre>
  </div>

  <!-- STDERR -->
  <div class="glass p-6 rounded-xl">
    <h2 class="text-lg font-semibold mb-3">STDERR</h2>

    <pre class="text-sm bg-black/80 text-red-400 p-4 rounded-lg overflow-x-auto max-h-[400px]">
{{ run.stderr|default:"(empty)" }}
    </pre>
  </div>

</div>

{% endblock %}
